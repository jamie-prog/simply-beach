{% comment %}theme-check-disable ImgLazyLoading{% endcomment %}
{% comment %}
    Renders a product thumbnail with a modal-opener

    Accepts:
    - media: {Object} Product Media object
    - position: {String} Position of the media. Used for accessible label.
    - loop: {Boolean} Enable video looping (optional)
    - modal_id: {String} The product modal that will be shown by clicking the thumbnail
    - xr_button: {Boolean} Renders the "View in your space" button (shopify-xr-button) if the media is a 3D Model
    - image_width: {Float} The width percentage that the media column occupies on desktop.
    - lazy_load: {Boolean} Image should be lazy loaded. Default: true (optional)

    Usage:
    {% render 'product-thumbnail',
      media: media,
      position: forloop.index,
      loop: section.settings.enable_video_looping,
      modal_id: section.id
    %}
{% endcomment %}

<noscript>
  <div class="product__media media gradient global-media-settings" style="padding-top: {{ 1 | divided_by: image.aspect_ratio | times: 100 }}%;">
    <img
      srcset="{% if image.width >= 493 %}{{ image | image_url: width: 493 }} 493w,{% endif %}
        {% if image.width >= 600 %}{{ image | image_url: width: 600 }} 600w,{% endif %}
        {% if image.width >= 713 %}{{ image | image_url: width: 713 }} 713w,{% endif %}
        {% if image.width >= 823 %}{{ image | image_url: width: 823 }} 823w,{% endif %}
        {% if image.width >= 990 %}{{ image | image_url: width: 990 }} 990w,{% endif %}
        {% if image.width >= 1100 %}{{ image | image_url: width: 1100 }} 1100w,{% endif %}
        {% if image.width >= 1206 %}{{ image | image_url: width: 1206 }} 1206w,{% endif %}
        {% if image.width >= 1346 %}{{ image | image_url: width: 1346 }} 1346w,{% endif %}
        {% if image.width >= 1426 %}{{ image | image_url: width: 1426 }} 1426w,{% endif %}
        {% if image.width >= 1646 %}{{ image | image_url: width: 1646 }} 1646w,{% endif %}
        {% if image.width >= 1946 %}{{ image | image_url: width: 1946 }} 1946w,{% endif %}
        {{ image | image_url }} {{ image.width }}w"
      src="{{ image | image_url: width: 1946 }}"
      sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | times: image_width | round }}px, (min-width: 990px) calc({{ image_width | times: 100 }}vw - 10rem), (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)"
      {% unless lazy_load == false %}loading="lazy"{% endunless %}
      width="973"
      height="{{ 973 | divided_by: image.aspect_ratio | ceil }}"
      alt="{{ image.alt | escape }}"
    >
  </div>
</noscript>

<modal-opener class="product__modal-opener product__modal-opener--image no-js-hidden" data-modal="#ProductModal-{{ modal_id }}">
  <div class="product__media media media--transparent gradient global-media-settings" style="padding-top: {{ 1 | divided_by: image.aspect_ratio | times: 100 }}%;">
    <img
      srcset="{% if image.width >= 493 %}{{ image | image_url: width: 493 }} 493w,{% endif %}
        {% if image.width >= 600 %}{{ image | image_url: width: 600 }} 600w,{% endif %}
        {% if image.width >= 713 %}{{ image | image_url: width: 713 }} 713w,{% endif %}
        {% if image.width >= 823 %}{{ image | image_url: width: 823 }} 823w,{% endif %}
        {% if image.width >= 990 %}{{ image | image_url: width: 990 }} 990w,{% endif %}
        {% if image.width >= 1100 %}{{ image | image_url: width: 1100 }} 1100w,{% endif %}
        {% if image.width >= 1206 %}{{ image | image_url: width: 1206 }} 1206w,{% endif %}
        {% if image.width >= 1346 %}{{ image | image_url: width: 1346 }} 1346w,{% endif %}
        {% if image.width >= 1426 %}{{ image | image_url: width: 1426 }} 1426w,{% endif %}
        {% if image.width >= 1646 %}{{ image | image_url: width: 1646 }} 1646w,{% endif %}
        {% if image.width >= 1946 %}{{ image | image_url: width: 1946 }} 1946w,{% endif %}
        {{ image | image_url }} {{ image.width }}w"
      src="{{ image | image_url: width: 1946 }}"
      sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | times: image_width | round }}px, (min-width: 990px) calc({{ image_width | times: 100 }}vw - 10rem), (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)"
      {% unless lazy_load == false %}loading="lazy"{% endunless %}
      width="973"
      height="{{ 973 | divided_by: image.aspect_ratio | ceil }}"
      alt="{{ image.alt | escape }}"
    >
  </div>
</modal-opener>